-- TABLE User

create table User_ (
    id_User int not null primary key generated always as identity
    (start with 1,increment by 1),
    owner varchar (10),
    email varchar (30),
    cpf varchar (11),
    bday date,
    userType int
);


-- Table access --

create table Access_ (
    id_Access int not null primary key generated always as identity
    (start with 1,increment by 1),
    userName varchar(10),
    password varchar (7),
    foreign key (id_Access) references User_ (id_User)
);

-- table account --

create table Account_ (
    id_Account int not null primary key generated always as identity
        (start with 1, increment by 1),
    amount double not null,
    types varchar (10),
    foreign key (id_Account) references User_ (id_User)
);

-- payment table -- 

create table Payment_ (
    id_Payment int not null primary key generated always as identity
        (start with 1, increment by 1 ),
    numberCard varchar (16),
    total double not null,
    paymentDate Date,
    status varchar (20)
);

-- Table movies --

create table Movie_ (
    id_Movie int not null primary key generated always as identity 
    (start with 1, increment by 1),
    title varchar (50),
    years int not null,
    director varchar (50),
    classification int not null,
    genre varchar (20)
);


select*from Access_ inner join User_ on Access_.id_Access = User_.id_User join Account_ on Access_.id_Access = Account_.id_Account join Payment_ on Access_.id_Access = id_Payment;

select*from User_;
select*from Access_;
select*from Account_;
select*from Payment_;
select*from Movies_

Drop table User_;
Drop table Access_;
Drop table Account_;
Drop table Payment_;

-- Alter table User_Projeto add column user_type int;
update user_projeto set user_type=1;
update user_projeto set user_type=2 WHERE USERNAME='admin'; --

-- Alter table User_Projeto add column bday DATE;
update user_projeto set bday = '1900-03-23';
update user_projeto set bday = '1995-10-23' WHERE USERNAME='victor'; --

update USER_ SET USERTYPE=2 WHERE OWNER='Victor';

insert into MOVIE_ (title,years,director,classification,genre,url) values ('Os vingadores',2012,'Joss Whendon', 12,'ação','https://www.youtube.com/embed/6Y6zOSn8ff4');

select*from Access_ inner join User_ on Access_.id_Access = User_.id_User join Account_ on Access_.id_Access = Account_.id_Account where userName=?;